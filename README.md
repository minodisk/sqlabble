# sqlabble [ ![Codeship Status for minodisk/sqlabble](https://img.shields.io/codeship/f3642650-d5ab-0134-3d76-0246ca48a45f/master.svg)](https://app.codeship.com/projects/202522) [![Go Report Card](https://goreportcard.com/badge/github.com/minodisk/sqlabble)](https://goreportcard.com/report/github.com/minodisk/sqlabble) [![Coverage Status](https://coveralls.io/repos/github/minodisk/sqlabble/badge.svg?branch=master)](https://coveralls.io/github/minodisk/sqlabble?branch=master) [![GoDoc](https://godoc.org/github.com/minodisk/sqlabble?status.png)](https://godoc.org/github.com/minodisk/sqlabble) [![MIT License](http://img.shields.io/badge/license-MIT-blue.svg?style=flat)](LICENSE)

SQL query builder with type support.

## Features

- Type support:
  - Restrict method chain order.
  - Restrict expression that can be specified by  the interface type.
- Flexible formatter:
  - Prefix and Indent.
  - Quote the alias according to the specification of each SQL server.
    - Standard: `"`
    - MySQL: `` ` ``

## Processing Layers

```
                                   Format
                                     |
         Nodeizer   Tokenizer    Generator
            |           |            |
Statement --+-> Nodes --+-> Tokens --+-> Query
                        |
                        +--------------> Values
```

## Supports

### Clauses

- [x] `CREATE TABLE {TABLE}`
- [x] `CREATE TABLE IF NOT EXISTS {TABLE}`
- [x] `SELECT {COLUMN|FUNCTION|SUBQUERY}`
- [x] `SELECT DISTINCT {COLUMN|FUNCTION|SUBQUERY}`
- [x] `FROM {TABLE|SUBQUERY}`
- [x] `WHERE {OPERATION}`
- [x] `GROUP BY {COLUMN}`
- [x] `HAVING`
- [x] `ORDER BY {ORDER}`
- [x] `LIMIT {COUNT}`
- [x] `OFFSET {COUNT}`
- [x] `INSERT INTO {TABLE} ({COLUMN})`
- [x] `VALUES ({VALUE})`
- [x] `DEFAULT VALUES`
- [x] `UPDATE {TABLE}`
- [x] `SET ({ASSIGNMENT})`
- [x] `DELETE`

### Column Definition

- [x] `({COLUMN} {DEFINITION})`

### Joins

- [x] `JOIN {TABLE|SUBQUERY}`
- [x] `INNER JOIN {TABLE|SUBQUERY}`
- [x] `LEFT JOIN {TABLE|SUBQUERY}`
- [x] `RIGHT JOIN {TABLE|SUBQUERY}`

#### Conditions

- [x] `ON {COLUMN} = {COLUMN}`
- [x] `USING {COLUMN}`

### Orders

- [x] `{COLUMN} ASC`
- [x] `{COLUMN} DESC`

### Aliases

- [x] `{TABLE} AS {ALIAS}`
- [x] `{COLUMN} AS {ALIAS}`

### Assignment

- [x] `{COLUMN} = {VALUE|FUNCTION|SUBQUERY}`

### Sets

- [x] `({STATEMENT}) UNION ({STATEMENT})`
- [x] `({STATEMENT}) UNION ALL ({STATEMENT})`
- [x] `({STATEMENT}) INTERSECT ({STATEMENT})`
- [x] `({STATEMENT}) INTERSECT ALL ({STATEMENT})`
- [x] `({STATEMENT}) EXCEPT ({STATEMENT})`
- [x] `({STATEMENT}) EXCEPT ALL ({STATEMENT})`

### Conditional Logics

- [x] `CASE {VALUE|COLUMN|FUNCTION|SUBQUERY} WHEN {VALUE} THEN {VALUE|COLUMN|FUNCTION|SUBQUERY} ELSE {VALUE|COLUMN|FUNCTION|SUBQUERY} END`
- [x] `CASE WHEN {OPERATION} THEN {VALUE|COLUMN|FUNCTION|SUBQUERY} ELSE {VALUE|COLUMN|FUNCTION|SUBQUERY} END`

### Operators

#### Logical

- [x] `{OPERATION} AND {OPERATION}`
- [x] `{OPERATION} OR {OPERATION}`
- [x] `NOT ({OPERATION})`

#### Comparison

##### Scalar

- [x] `{VALUE|COLUMN|FUNCTION|SUBQUERY} = {VALUE|COLUMN|FUNCTION|SUBQUERY}`
- [x] `{VALUE|COLUMN|FUNCTION|SUBQUERY} != {VALUE|COLUMN|FUNCTION|SUBQUERY}`
- [x] `{VALUE|COLUMN|FUNCTION|SUBQUERY} > {VALUE|COLUMN|FUNCTION|SUBQUERY}`
- [x] `{VALUE|COLUMN|FUNCTION|SUBQUERY} >= {VALUE|COLUMN|FUNCTION|SUBQUERY}`
- [x] `{VALUE|COLUMN|FUNCTION|SUBQUERY} < {VALUE|COLUMN|FUNCTION|SUBQUERY}`
- [x] `{VALUE|COLUMN|FUNCTION|SUBQUERY} <= {VALUE|COLUMN|FUNCTION|SUBQUERY}`
- [x] `{VALUE|COLUMN|FUNCTION|SUBQUERY} LIKE {VALUE|COLUMN|FUNCTION|SUBQUERY}`
- [x] `{VALUE|COLUMN|FUNCTION|SUBQUERY} REGEXP {VALUE|COLUMN|FUNCTION|SUBQUERY}`
- [x] `{VALUE|COLUMN|FUNCTION|SUBQUERY} BETWEEN {VALUE|COLUMN|FUNCTION|SUBQUERY} AND {VALUE|COLUMN|FUNCTION|SUBQUERY}`
- [x] `{VALUE|COLUMN|FUNCTION|SUBQUERY} IN {VALUES|SUBQUERY}`
- [x] `{VALUE|COLUMN|FUNCTION|SUBQUERY} NOT IN {VALUES|SUBQUERY}`
- [x] `{COLUMN|SUBQUERY} IS NULL`
- [x] `{COLUMN|SUBQUERY} IS NOT NULL`

##### Nonscalar

- [x] `{VALUE|COLUMN|FUNCTION|SUBQUERY} = ALL {SUBQUERY}`
- [x] `{VALUE|COLUMN|FUNCTION|SUBQUERY} != ALL {SUBQUERY}`
- [x] `{VALUE|COLUMN|FUNCTION|SUBQUERY} > ALL {SUBQUERY}`
- [x] `{VALUE|COLUMN|FUNCTION|SUBQUERY} >= ALL {SUBQUERY}`
- [x] `{VALUE|COLUMN|FUNCTION|SUBQUERY} < ALL {SUBQUERY}`
- [x] `{VALUE|COLUMN|FUNCTION|SUBQUERY} <= ALL {SUBQUERY}`
- [x] `{VALUE|COLUMN|FUNCTION|SUBQUERY} = ANY {SUBQUERY}`
- [x] `{VALUE|COLUMN|FUNCTION|SUBQUERY} != ANY {SUBQUERY}`
- [x] `{VALUE|COLUMN|FUNCTION|SUBQUERY} > ANY {SUBQUERY}`
- [x] `{VALUE|COLUMN|FUNCTION|SUBQUERY} >= ANY {SUBQUERY}`
- [x] `{VALUE|COLUMN|FUNCTION|SUBQUERY} < ANY {SUBQUERY}`
- [x] `{VALUE|COLUMN|FUNCTION|SUBQUERY} <= ANY {SUBQUERY}`
- [x] `EXISTS {SUBQUERY}`
- [x] `NOT EXISTS {SUBQUERY}`

### Functions

#### Control Flow

N/A

#### String

N/A

#### Numeric

N/A

#### Date and Time

- [x] `ADDDATE({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `ADDTIME({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `CONVERT_TZ({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `CURDATE({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `CURRENT_DATE({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `CURRENT_TIME({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `CURRENT_TIMESTAMP({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `CURTIME({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `DATE({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `ATE_AD({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `DATE_FORMAT({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `DATE_SUB({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `DATEDIFF({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `DAY({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `DAYNAME({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `DAYOFMONTH({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `DAYOFWEEK({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `DAYOFYEAR({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `EXTRACT({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `FROM_DAYS({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `FROM_UNIXTIME({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `GET_FORMAT({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `HOUR({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `LAST_DAY({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `LOCALTIME({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `LOCALTIMESTAMP({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `MAKEDATE({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `MAKETIME({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `MICROSECOND({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `MINUTE({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `MONTH({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `MONTHNAME({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `NOW({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `PERIOD_ADD({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `PERIOD_DIFF({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `QUARTER({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `SEC_TO_TIME({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `SECOND({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `STR_TO_DATE({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `SUBDATE({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `SUBTIME({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `SYSDATE({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `TIME({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `IME_FORMA({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `TIME_TO_SEC({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `TIMEDIFF({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `TIMESTAMP({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `TIMESTAMPADD({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `TIMESTAMPDIFF({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `TO_DAYS({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `TO_SECONDS({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `UNIX_TIMESTAMP({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `UTC_DATE({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `UTC_TIME({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `UTC_TIMESTAMP({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `WEEK({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `WEEKDAY({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `WEEKOFYEAR({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `YEAR({VALUE|COLUMN|FUNCTION|SUBQUERY})`
- [x] `YEARWEEK({VALUE|COLUMN|FUNCTION|SUBQUERY})`
